<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cr√©er une Activit√© - LinkUp</title>
  <link rel="stylesheet" href="main.css">
  <link rel="icon" href="logo.png" type="image/png">
</head>
<body>
  <header class="header">
    <nav class="navbar" aria-label="Main navigation">
      <div class="navbar__container">
        <a class="logo" href="acceuil.html">
          <div class="logo__icon">
            <img src="./images/Logo.png" alt="LinkUp Logo" />
          </div>
        </a>
        <button
          class="mobile-menu"
          aria-expanded="false"
          aria-label="Toggle menu"
        >
          <span class="mobile-menu__bar"></span>
          <span class="mobile-menu__bar"></span>
          <span class="mobile-menu__bar"></span>
        </button>

        <ul class="nav" role="menubar">
          <li class="nav__item">
            <a class="nav__link" href="acceuil.html#hero">Accueil</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="acceuil.html#categories">Cat√©gories</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="acceuil.html#activities">Activit√©s</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="acceuil.html#contact">Contact</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="notifications.html">Notifications</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="profil.html">Profil</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="settings.html">R√©glages</a>
          </li>
        </ul>

        <div class="navbar__actions">
          <div class="user-menu">
            <button class="user-menu__trigger" aria-expanded="false" aria-label="Menu utilisateur">
              <div class="user-avatar">
                <img src="./images/avatar-placeholder.svg" alt="Avatar" class="user-avatar__image">
              </div>
              <span class="user-menu__name">Jean Dupont</span>
              <svg class="user-menu__arrow" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
              </svg>
            </button>
            <div class="user-menu__dropdown">
              <a class="user-menu__item" href="profil.html">
                <svg fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                </svg>
                Mon Profil
              </a>
              <a class="user-menu__item" href="settings.html">
                <svg fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path>
                </svg>
                R√©glages
              </a>
              <a class="user-menu__item" href="notifications.html">
                <svg fill="currentColor" viewBox="0 0 20 20">
                  <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"></path>
                </svg>
                Notifications
              </a>
              <div class="user-menu__divider"></div>
              <a class="user-menu__item user-menu__item--danger" href="login.html">
                <svg fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"></path>
                </svg>
                Se d√©connecter
              </a>
            </div>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <main class="main">
    <!-- Hero Section -->
    <section id="hero" class="hero">
      <div class="hero__carousel" aria-hidden="true">
        <div class="hero__slide" style="background-image: url('https://source.unsplash.com/1200x600/?create,activity,planning');"></div>
      </div>
      <div class="hero__overlay"></div>
      <div class="hero__content">
        <h1 class="hero__title">Cr√©er une Nouvelle Activit√©</h1>
        <div class="hero__search" role="search">
          <input
            class="hero__input"
            type="text"
            placeholder="Commencez par donner un titre √† votre activit√©..."
            readonly
          />
          <button class="hero__button" type="button" onclick="document.getElementById('basics').scrollIntoView({behavior: 'smooth'})">
            <svg class="btn-icon" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
            </svg>
            Commencer
          </button>
        </div>
        <div class="progress-indicator">
          <div class="progress-step active" data-step="1">
            <span class="step-number">1</span>
            <span class="step-label">Informations</span>
          </div>
          <div class="progress-step" data-step="2">
            <span class="step-number">2</span>
            <span class="step-label">D√©tails</span>
          </div>
          <div class="progress-step" data-step="3">
            <span class="step-number">3</span>
            <span class="step-label">Lieu</span>
          </div>
          <div class="progress-step" data-step="4">
            <span class="step-number">4</span>
            <span class="step-label">Finalisation</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Basic Information Section -->
    <section id="basics" class="section">
      <div class="section__container">
        <div class="section-header">
          <div class="section-icon">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <h2 class="section__title">Informations de Base</h2>
          <p class="section__subtitle">Commencez par d√©crire les fondamentaux de votre activit√©</p>
        </div>
        <div class="form-container">
          <form class="form" id="activity-form">
            <div class="form-grid">
              <div class="form-field full-width">
                <label for="activity-title" class="form-label required">
                  Titre de l'activit√©
                </label>
                <input type="text" id="activity-title" name="title" class="form-input" placeholder="Ex: Randonn√©e en montagne" required>
              </div>

              <div class="form-field">
                <label for="activity-category" class="form-label required">
                  Cat√©gorie
                </label>
                <select id="activity-category" name="category" class="form-select" required>
                  <option value="">Choisir une cat√©gorie</option>
                  <option value="sport">Sport & Aventure</option>
                  <option value="art">Arts & Ateliers</option>
                  <option value="food">Food & Drink</option>
                  <option value="culture">Culture & Loisirs</option>
                  <option value="nature">Nature & Environnement</option>
                  <option value="other">Autre</option>
                </select>
              </div>

              <div class="form-field">
                <label for="activity-level" class="form-label required">
                  Niveau requis
                </label>
                <select id="activity-level" name="level" class="form-select" required>
                  <option value="">Choisir un niveau</option>
                  <option value="beginner">D√©butant</option>
                  <option value="intermediate">Interm√©diaire</option>
                  <option value="advanced">Avanc√©</option>
                  <option value="all">Tous niveaux</option>
                </select>
              </div>
            </div>

            <div class="form-grid">
              <div class="form-field">
                <label for="activity-date" class="form-label required">
                  Date
                </label>
                <input type="date" id="activity-date" name="date" class="form-input" required>
              </div>
              <div class="form-field">
                <label for="activity-time" class="form-label required">
                  Heure de d√©but
                </label>
                <input type="time" id="activity-time" name="time" class="form-input" required>
              </div>
              <div class="form-field">
                <label for="activity-duration" class="form-label required">
                  Dur√©e (heures)
                </label>
                <input type="number" id="activity-duration" name="duration" class="form-input" min="0.5" step="0.5" placeholder="2.5" required>
              </div>
            </div>

            <div class="form-field full-width">
              <label for="activity-description" class="form-label required">
                Description d√©taill√©e
              </label>
              <textarea id="activity-description" name="description" class="form-textarea" rows="5" placeholder="D√©crivez votre activit√© en d√©tail..." required></textarea>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Practical Details Section -->
    <section id="details" class="section section--gray">
      <div class="section__container">
        <div class="section-header">
          <div class="section-icon">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <h2 class="section__title">D√©tails Pratiques</h2>
          <p class="section__subtitle">D√©finissez les conditions et √©quipements n√©cessaires</p>
        </div>
        <div class="form-container">
          <div class="form-grid">
            <div class="form-field">
              <label for="activity-min-age" class="form-label">
                √Çge minimum
              </label>
              <input type="number" id="activity-min-age" name="min_age" class="form-input" min="0" placeholder="12">
            </div>

            <div class="form-field">
              <label for="activity-max-participants" class="form-label required">
                Nombre max de participants
              </label>
              <input type="number" id="activity-max-participants" name="max_participants" class="form-input" min="1" placeholder="15" required>
            </div>

            <div class="form-field">
              <label for="activity-price" class="form-label required">
                Prix par personne (‚Ç¨)
              </label>
              <input type="number" id="activity-price" name="price" class="form-input" min="0" step="0.5" placeholder="25" required>
            </div>
          </div>

          <div class="form-field full-width">
            <label for="activity-equipment" class="form-label">
              √âquipement requis
            </label>
            <textarea id="activity-equipment" name="equipment" class="form-textarea" rows="3" placeholder="Liste de l'√©quipement n√©cessaire"></textarea>
          </div>

          <div class="form-field full-width">
            <label for="activity-conditions" class="form-label">
              Conditions sp√©ciales
            </label>
            <textarea id="activity-conditions" name="conditions" class="form-textarea" rows="3" placeholder="Conditions m√©t√©o, restrictions..."></textarea>
          </div>
        </div>
      </div>
    </section>

    <!-- Location Section -->
    <section id="location" class="section">
      <div class="section__container">
        <div class="section-header">
          <div class="section-icon">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <h2 class="section__title">Lieu et Acc√®s</h2>
          <p class="section__subtitle">Indiquez o√π et comment rejoindre votre activit√©</p>
        </div>
        <div class="form-container">
          <div class="form-grid">
            <div class="form-field full-width">
              <label for="activity-location" class="form-label required">
                Adresse compl√®te
              </label>
              <input type="text" id="activity-location" name="location" class="form-input" placeholder="123 Rue de la Montagne, 75001 Paris" required>
            </div>

            <div class="form-field">
              <label for="activity-city" class="form-label required">
                Ville
              </label>
              <input type="text" id="activity-city" name="city" class="form-input" placeholder="Paris" required>
            </div>

            <div class="form-field">
              <label for="activity-postal" class="form-label required">
                Code postal
              </label>
              <input type="text" id="activity-postal" name="postal_code" class="form-input" placeholder="75001" required>
            </div>
          </div>

          <div class="form-field full-width">
            <label for="activity-transport" class="form-label">
              Informations de transport
            </label>
            <textarea id="activity-transport" name="transport_info" class="form-textarea" rows="3" placeholder="Comment acc√©der au lieu ?"></textarea>
          </div>
        </div>
      </div>
    </section>

    <!-- Finalization Section -->
    <section id="finalization" class="section section--gray">
      <div class="section__container">
        <div class="section-header">
          <div class="section-icon">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <h2 class="section__title">Finalisation</h2>
          <p class="section__subtitle">Ajoutez une photo et v√©rifiez les informations avant publication</p>
        </div>
        <div class="form-container">
          <div class="form-field full-width">
            <label for="activity-image" class="form-label required">
              Photo principale
            </label>
            <input type="file" id="activity-image" name="image" class="form-input" accept="image/*" required>
          </div>

          <div class="final-summary">
            <div class="summary-header">
              <svg class="summary-icon" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <h3>R√©capitulatif de votre activit√©</h3>
            </div>
            <div class="summary-grid">
              <div class="summary-item">
                <div class="summary-label">
                  <svg class="summary-item-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
                  </svg>
                  Titre
                </div>
                <div class="summary-value" id="summary-title">-</div>
              </div>
              <div class="summary-item">
                <div class="summary-label">
                  <svg class="summary-item-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
                  </svg>
                  Date & Heure
                </div>
                <div class="summary-value" id="summary-datetime">-</div>
              </div>
              <div class="summary-item">
                <div class="summary-label">
                  <svg class="summary-item-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                  </svg>
                  Lieu
                </div>
                <div class="summary-value" id="summary-location">-</div>
              </div>
              <div class="summary-item">
                <div class="summary-label">
                  <svg class="summary-item-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z"></path>
                  </svg>
                  Prix
                </div>
                <div class="summary-value" id="summary-price">-</div>
              </div>
            </div>
          </div>

          <div class="final-actions">
            <button type="button" onclick="window.location.href='acceuil.html'" class="btn btn--secondary btn--large">
              <svg class="btn-icon" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414l-4.293 4.293 4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414l4.293-4.293-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
              </svg>
              Annuler
            </button>
            <button type="submit" form="activity-form" class="btn btn--primary btn--large btn--success">
              <svg class="btn-icon" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
              </svg>
              Publier l'activit√©
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
      <div class="cta__container">
        <h2 class="cta__title">Besoin d'aide ?</h2>
        <p class="cta__description">
          D√©couvrez nos conseils pour cr√©er la meilleure activit√© possible
        </p>
        <button class="btn btn--secondary" type="button">
          Voir les conseils
        </button>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer__content">
        <div class="footer__wrapper">
          <div class="footer__section">
            <h3>LinkUp</h3>
            <p>Connectez-vous avec des passionn√©s et participez √† des activit√©s extraordinaires.</p>
          </div>
          <div class="footer__section">
            <h4>Liens rapides</h4>
            <ul>
              <li><a href="acceuil.html#hero">Accueil</a></li>
              <li><a href="acceuil.html#categories">Cat√©gories</a></li>
              <li><a href="acceuil.html#activities">Activit√©s</a></li>
              <li><a href="profil.html">Profil</a></li>
            </ul>
          </div>
          <div class="footer__section">
            <h4>Support</h4>
            <ul>
              <li><a href="acceuil.html#contact">Contact</a></li>
              <li><a href="#">Aide</a></li>
              <li><a href="#">Confidentialit√©</a></li>
            </ul>
          </div>
        </div>
        <div class="footer__bottom">
          <p>&copy; 2025 LinkUp. Tous droits r√©serv√©s.</p>
        </div>
      </div>
    </div>
  </footer>

  <script src="script.js"></script>
  <script>
    // Enhanced Create Activity Page JavaScript
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize all features
      initStepNavigation();
      initImageUpload();
      initFormValidation();
      initLivePreview();
      initProgressTracking();
      initContextualTips();
      initSummaryUpdate();
    });

    // Step Navigation System
    function initStepNavigation() {
      const steps = document.querySelectorAll('.form-step');
      const progressSteps = document.querySelectorAll('.progress-step');
      let currentStep = 1;

      // Next step buttons
      document.querySelectorAll('.btn-step-next').forEach(btn => {
        btn.addEventListener('click', function() {
          if (validateCurrentStep(currentStep)) {
            goToStep(currentStep + 1);
          }
        });
      });

      // Previous step buttons
      document.querySelectorAll('.btn-step-prev').forEach(btn => {
        btn.addEventListener('click', function() {
          goToStep(currentStep - 1);
        });
      });

      function goToStep(stepNumber) {
        // Hide all steps
        steps.forEach(step => step.classList.remove('active'));
        progressSteps.forEach(step => step.classList.remove('active'));

        // Show target step
        const targetStep = document.querySelector(`.form-step[data-step="${stepNumber}"]`);
        const targetProgress = document.querySelector(`.progress-step[data-step="${stepNumber}"]`);

        if (targetStep && targetProgress) {
          targetStep.classList.add('active');
          targetProgress.classList.add('active');
          currentStep = stepNumber;
          updateProgressUI();
          scrollToTop();
        }
      }

      function validateCurrentStep(step) {
        const currentStepEl = document.querySelector(`.form-step[data-step="${step}"]`);
        const requiredFields = currentStepEl.querySelectorAll('[required]');
        let isValid = true;

        requiredFields.forEach(field => {
          if (!field.value.trim()) {
            field.style.borderColor = '#ef4444';
            field.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.1)';
            isValid = false;
          } else {
            field.style.borderColor = '#10b981';
            field.style.boxShadow = '0 0 0 3px rgba(16, 185, 129, 0.1)';
          }
        });

        if (!isValid) {
          showNotification('Veuillez remplir tous les champs obligatoires de cette √©tape.', 'error');
        }

        return isValid;
      }

      function scrollToTop() {
        document.querySelector('.create-activity-section').scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    }

    // Enhanced Image Upload
    function initImageUpload() {
      const fileInput = document.getElementById('activity-image');
      const uploadArea = document.getElementById('file-upload-area');
      const preview = document.getElementById('image-preview');
      const previewImg = document.getElementById('preview-img');
      const changeBtn = document.getElementById('change-image-btn');

      // Drag and drop functionality
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        uploadArea.addEventListener(eventName, preventDefaults, false);
      });

      ['dragenter', 'dragover'].forEach(eventName => {
        uploadArea.addEventListener(eventName, highlight, false);
      });

      ['dragleave', 'drop'].forEach(eventName => {
        uploadArea.addEventListener(eventName, unhighlight, false);
      });

      uploadArea.addEventListener('drop', handleDrop, false);
      uploadArea.addEventListener('click', () => fileInput.click());
      fileInput.addEventListener('change', handleFileSelect);
      changeBtn.addEventListener('click', () => fileInput.click());

      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }

      function highlight() {
        uploadArea.classList.add('drag-over');
      }

      function unhighlight() {
        uploadArea.classList.remove('drag-over');
      }

      function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        handleFiles(files);
      }

      function handleFileSelect(e) {
        const files = e.target.files;
        handleFiles(files);
      }

      function handleFiles(files) {
        if (files.length > 0) {
          const file = files[0];
          if (validateImageFile(file)) {
            displayPreview(file);
          }
        }
      }

      function validateImageFile(file) {
        const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
        const maxSize = 5 * 1024 * 1024; // 5MB

        if (!validTypes.includes(file.type)) {
          showNotification('Format de fichier non support√©. Utilisez JPG, PNG ou GIF.', 'error');
          return false;
        }

        if (file.size > maxSize) {
          showNotification('Le fichier est trop volumineux. Taille maximum : 5MB.', 'error');
          return false;
        }

        return true;
      }

      function displayPreview(file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          previewImg.src = e.target.result;
          preview.style.display = 'block';
          uploadArea.style.display = 'none';
        };
        reader.readAsDataURL(file);
      }
    }

    // Progress Tracking
    function initProgressTracking() {
      updateProgressUI();

      // Update progress when fields change
      const allInputs = document.querySelectorAll('input, select, textarea');
      allInputs.forEach(input => {
        input.addEventListener('input', updateProgressUI);
        input.addEventListener('change', updateProgressUI);
      });
    }

    function updateProgressUI() {
      const totalFields = document.querySelectorAll('input, select, textarea').length;
      const filledFields = document.querySelectorAll('input:not([type="file"]):not([type="submit"]), select, textarea').length -
                          document.querySelectorAll('input:not([type="file"]):not([type="submit"]), select, textarea').length +
                          Array.from(document.querySelectorAll('input:not([type="file"]):not([type="submit"]), select, textarea'))
                               .filter(field => field.value.trim() !== '').length;

      const currentStepEl = document.querySelector('.form-step.active');
      const currentStep = currentStepEl ? currentStepEl.dataset.step : 1;

      document.getElementById('current-step').textContent = `${currentStep} / 4`;
      document.getElementById('filled-fields').textContent = `${filledFields} / ${totalFields}`;
    }

    // Contextual Tips
    function initContextualTips() {
      const tipSteps = document.querySelectorAll('.tip-step');

      function showRelevantTips(step) {
        tipSteps.forEach(tip => tip.classList.remove('active'));
        const relevantTip = document.querySelector(`.tip-step[data-tip-step="${step}"]`);
        if (relevantTip) {
          relevantTip.classList.add('active');
        }
      }

      // Show tips for current step
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
            const target = mutation.target;
            if (target.classList.contains('active') && target.classList.contains('form-step')) {
              const step = target.dataset.step;
              showRelevantTips(step);
            }
          }
        });
      });

      document.querySelectorAll('.form-step').forEach(step => {
        observer.observe(step, { attributes: true });
      });

      // Initialize with first step
      showRelevantTips(1);
    }

    // Enhanced Form Validation
    function initFormValidation() {
      const form = document.querySelector('.create-activity-form');

      form.addEventListener('submit', function(e) {
        e.preventDefault();

        if (validateAllSteps()) {
          // Show success animation
          showSuccessAnimation();
          setTimeout(() => {
            alert('üéâ Votre activit√© a √©t√© cr√©√©e avec succ√®s ! Elle sera publi√©e apr√®s validation.');
            window.location.href = 'acceuil.html';
          }, 2000);
        } else {
          showNotification('Veuillez corriger les erreurs avant de publier.', 'error');
        }
      });
    }

    function validateAllSteps() {
      const requiredFields = document.querySelectorAll('[required]');
      let isValid = true;

      requiredFields.forEach(field => {
        if (!field.value.trim()) {
          field.style.borderColor = '#ef4444';
          field.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.1)';
          isValid = false;
        } else {
          field.style.borderColor = '#10b981';
          field.style.boxShadow = '0 0 0 3px rgba(16, 185, 129, 0.1)';
        }
      });

      return isValid;
    }

    // Live Preview and Summary
    function initLivePreview() {
      const inputs = [
        'activity-title', 'activity-date', 'activity-time', 'activity-location',
        'activity-price', 'activity-max-participants', 'activity-category'
      ];

      inputs.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.addEventListener('input', updateSummary);
        }
      });
    }

    function initSummaryUpdate() {
      updateSummary();
    }

    function updateSummary() {
      const title = document.getElementById('activity-title').value || 'Titre non d√©fini';
      const date = document.getElementById('activity-date').value;
      const time = document.getElementById('activity-time').value;
      const location = document.getElementById('activity-location').value || 'Lieu non d√©fini';
      const price = document.getElementById('activity-price').value;
      const participants = document.getElementById('activity-max-participants').value;
      const categorySelect = document.getElementById('activity-category');
      const category = categorySelect.options[categorySelect.selectedIndex].text;

      document.getElementById('summary-title').textContent = title;
      document.getElementById('summary-location').textContent = location;
      document.getElementById('summary-price').textContent = price ? `${price}‚Ç¨` : 'Prix non d√©fini';
      document.getElementById('summary-participants').textContent = participants || 'Non d√©fini';
      document.getElementById('summary-category').textContent = category.startsWith('Choisir') ? 'Non d√©fini' : category;

      if (date && time) {
        const dateTime = new Date(date + 'T' + time);
        document.getElementById('summary-datetime').textContent =
          dateTime.toLocaleDateString('fr-FR', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          });
      } else {
        document.getElementById('summary-datetime').textContent = 'Date non d√©finie';
      }
    }

    // Utility Functions
    function showNotification(message, type = 'info') {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `notification notification--${type}`;
      notification.innerHTML = `
        <span class="notification-icon">${type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è'}</span>
        <span class="notification-message">${message}</span>
      `;

      // Add to page
      document.body.appendChild(notification);

      // Animate in
      setTimeout(() => notification.classList.add('show'), 100);

      // Remove after 5 seconds
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => notification.remove(), 300);
      }, 5000);
    }

    function showSuccessAnimation() {
      const form = document.querySelector('.create-activity-form');
      form.innerHTML = `
        <div class="success-animation">
          <div class="success-icon">üéâ</div>
          <h2>Activit√© cr√©√©e avec succ√®s !</h2>
          <p>Votre activit√© est en cours de validation. Vous recevrez une notification d√®s qu'elle sera publi√©e.</p>
          <div class="success-actions">
            <button onclick="window.location.href='acceuil.html'" class="btn btn--primary">
              Retour √† l'accueil
            </button>
            <button onclick="window.location.href='profil.html'" class="btn btn--secondary">
              Voir mon profil
            </button>
          </div>
        </div>
      `;
    }

    // Quick Actions
    function saveDraft() {
      showNotification('Brouillon sauvegard√© ! Vous pourrez le reprendre plus tard.', 'success');
    }

    function loadTemplate() {
      showNotification('Fonctionnalit√© de mod√®les bient√¥t disponible !', 'info');
    }

    function getHelp() {
      showNotification('Un guide d\'aide d√©taill√© s\'ouvrira bient√¥t dans une nouvelle fen√™tre.', 'info');
    }
  </script>
</body>
</html>
